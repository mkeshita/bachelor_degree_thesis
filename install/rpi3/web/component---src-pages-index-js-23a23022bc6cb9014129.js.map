{"version":3,"sources":["webpack:///./src/components/clock/clock.js","webpack:///./src/components/main/main.js","webpack:///./src/components/footer/footer.js","webpack:///./src/pages/index.js"],"names":["Clock","props","_this","_React$Component","call","this","getCurrentDate","Date","toLocaleDateString","weekday","month","day","getCurrentTime","time","toLocaleTimeString","hour","minute","setState","date","state","componentDidMount","_this2","timer","setInterval","componentWillUnmount","clearInterval","render","react_default","a","createElement","className","styles","clock","React","Component","Main","getReservations","fetch","config","Rpi3APIAddress","Rpi3APIPort","then","response","json","reservations","catch","error","console","log","getClassrooms","classrooms","getOccupation","occupation","updateCurrentTime","currentHour","getHours","currentMinutes","getMinutes","getCardDiv","r","i","globalState","lastShow","reservationsNum","key","card","subject","study","classroom","getComputerDiv","c","ip","shutdown","includes","toString","linux","windows","linuxUser","windowsUser","timeout","getClassroomDiv","arrow","free","join","occupied","reserved","futureOccupied","getCardsArray","cards","_iterator","entries","_isArray","Array","isArray","_i","Symbol","iterator","_ref","length","next","done","value","_ref2","push","endCard","getComputersArray","classroomMap","_iterator2","classroomToShow","Computers","_isArray2","_i2","_ref3","_ref4","article","aside","divs","require","e","Error","code","_unused","timer1","timer2","timer3","Footer","getValues","Rpi2APIAddress","Rpi2APIPort","cpdStatus","message","marquee","__webpack_exports__","Helmet","charSet","http-equiv","content","main","footer"],"mappings":"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","file":"component---src-pages-index-js-23a23022bc6cb9014129.js","sourcesContent":["import React from \"react\"\nimport styles from \"./clock.module.css\"\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      time : this.getCurrentTime(),\n      date : this.getCurrentDate()\n    }\n  }\n  /**\n   * Gets current date\n   */\n  getCurrentDate = () => {\n    return new Date().toLocaleDateString(\"es-ES\", { weekday: 'short', month: 'short', day: 'numeric' });\n  }\n\n  /**\n   * Gets current time\n   */\n  getCurrentTime = () => {\n    let time = new Date().toLocaleTimeString(\"es-ES\", {hour: \"2-digit\", minute:\"2-digit\"});\n    if (time === \"0:00\") {\n      this.setState({date : this.getCurrentDate()})\n    }\n    return time;\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(() => {\n      this.setState({time : this.getCurrentTime()});\n    }, 10000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    return (\n      <div className={styles.clock}>\n        <div className={styles.date}>{this.state.date}</div>\n        <div className={styles.time}>{this.state.time}</div>\n      </div>\n    );\n  }\n}\n\nexport default Clock;","import React from \"react\"\nimport styles from \"./main.module.css\"\nimport { string } from \"prop-types\";\n\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      globalState: -1\n    }\n    this.reservations = []\n    this.occupation = []\n    this.classrooms = []\n    this.reservationsNum = 0\n    this.currentHour = 0\n    this.currentMinutes = 0\n    this.classroomToShow = 0\n    this.lastShow = 0\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  /********** RPI3 API FUNCTIONS **********/\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON including today reservations\n   */\n  getReservations = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/reservations\")\n      .then(response => response.json())\n      .then(json => this.reservations = json)\n      .catch(error => console.log('Request HTTP GET /reservations failed', error))\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON including classrooms status\n   */\n  getClassrooms = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/classrooms\")\n      .then(response => response.json())\n      .then(json => this.classrooms = json)\n      .catch(error => console.log('Request HTTP GET /classrooms failed', error))\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON including occupation statistics\n   */\n  getOccupation = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/occupation\")\n      .then(response => response.json())\n      .then(json => this.occupation = json)\n      .catch(error => console.log('Request HTTP GET /occupation failed', error))\n  }\n\n  /********** AUXILIARY FUNCTIONS **********/\n\n  /**\n   * Updates the current time, used to display only future reservations\n   */\n  updateCurrentTime = () => {\n    let date = new Date();\n    this.currentHour = date.getHours();\n    this.currentMinutes = date.getMinutes();\n  }\n\n  /**\n   * Returns the html <div> object of a reservation needed by <article>\n   * @param {object} r info of a reservation\n   * @param {int}    i index to use to calculate react key of the div\n   */\n  getCardDiv = (r, i) => {\n    if (this.state.globalState === 1 && i <= this.lastShow && this.reservationsNum > 4) {\n      // if rotating, show next reservations (i >= 4)\n      return null\n    }\n    if (this.currentHour < r[\"EndHour\"] || (this.currentHour === r[\"EndHour\"] && this.currentMinutes < r[\"EndMinute\"])) {\n      return <div key={256+i} className={styles.card}>\n        <div className={styles.subject}>{r[\"Subject\"]}</div>\n        <div className={styles.study}>{r[\"Study\"]}</div>\n        <div className={styles.classroom}>{r[\"Classroom\"]} de {r[\"StartHour\"] + \":\" + \n          (r[\"StartMinute\"] === 0 ? \"00\" : r[\"StartMinute\"])} a {r[\"EndHour\"] + \":\" + \n          (r[\"EndMinute\"] === 0 ? \"00\" : r[\"EndMinute\"])}</div>\n      </div>;\n    }\n    return null\n  }\n\n  /**\n   * Returns the html <div> object of a computer needed by <article>\n   * @param {object} c info of a computer\n   * @param {int}    i index to use to calculate react key of the div\n   * @param {string} classroom classroom name\n   */\n  getComputerDiv = (c, i, classroom) => {\n    let ip = i\n    switch (classroom) {\n      case \"F16\":\n        ip += 101\n        break;\n      case \"F18\":\n        ip += 201\n        break;\n      case \"C05\":\n        ip += 51\n        break;\n      case \"C06\":\n        ip += 151\n        break;\n    }\n    switch (c) {\n      case 0:\n        return <div key={ip} className={styles.shutdown}>{(classroom.includes(\"F\"))? \"F\" + ip.toString() : \"C\" + ip.toString()}</div>\n      case 1:\n        return <div key={ip} className={styles.linux}>{(classroom.includes(\"F\"))? \"F\" + ip.toString() : \"C\" + ip.toString()}</div>\n      case 2:\n        return <div key={ip} className={styles.windows}>{(classroom.includes(\"F\"))? \"F\" + ip.toString() : \"C\" + ip.toString()}</div>\n      case 3:\n        return <div key={ip} className={styles.linuxUser}>{(classroom.includes(\"F\"))? \"F\" + ip.toString() : \"C\" + ip.toString()}</div>\n      case 4:\n        return <div key={ip} className={styles.windowsUser}>{(classroom.includes(\"F\"))? \"F\" + ip.toString() : \"C\" + ip.toString()}</div>\n      case 5:\n        return <div key={ip} className={styles.timeout}>{(classroom.includes(\"F\"))? \"F\" + ip.toString() : \"C\" + ip.toString()}</div>\n      default:\n        return <div key={ip}></div>\n    }\n  }\n\n    /**\n   * Returns the html <div> object of a classroom needed by <aside>\n   * @param {int}    i index to use to calculate react key of the div\n   * @param {string} c classroom\n   */\n  getClassroomDiv = (i, c) => {\n    let arrow = false\n    if (this.state.globalState-2 === i && this.state.globalState > 1) {\n      arrow = true\n    }\n    switch (this.classrooms[c]) {\n      case 0:\n        return <div key={i} className={(arrow)? [styles.free, styles.arrow].join(\" \"): styles.free}>{c}</div>\n      case 1:\n        return <div key={i} className={(arrow)? [styles.occupied, styles.arrow].join(\" \"): styles.occupied}>{c}</div>\n      case 2:\n        return <div key={i} className={(arrow)? [styles.reserved, styles.arrow].join(\" \"): styles.reserved}>{c}</div>\n      default:\n        return <div key={i} className={(arrow)? [styles.futureOccupied, styles.arrow].join(\" \"): styles.futureOccupied}>{c}</div>\n    }\n  }\n\n  /**\n   * Returns an array of html <div>, where every <div> is a reservation card\n   */\n  getCardsArray = () => {\n    this.updateCurrentTime()\n    let cards = [];\n    // Get reservations to show\n    for (const [i, r] of this.reservations.entries()) {\n      let card = this.getCardDiv(r, i)\n      if (card != null) {\n        cards.push(card)\n      }\n      if (cards.length === 4) {\n        this.lastShow = i\n        break;\n      }\n    }\n    // Return cards if any\n    if (cards.length !== 0) {\n      this.reservationsNum = this.reservations.length\n      return cards\n    }\n    return <div className={styles.endCard}>No hay reservas para el día de hoy o ya han finalizado todas las reservas</div>\n  }\n\n  /**\n   * Returns an array of html <div>, where every <div> is a computers of the same classroom\n   */\n  getComputersArray = () => {\n    let classroom = [\"F16\", \"F18\", \"C05\", \"C06\"]\n    let classroomMap = []\n    // Get computer status of the classroom\n    for (const [i, r] of this.occupation[classroom[this.classroomToShow]].Computers.entries()) {\n      classroomMap.push(this.getComputerDiv(r, i, classroom[this.classroomToShow]))\n    }\n    // Change between classrooms and update global state\n    this.classroomToShow = (this.classroomToShow + 1) % 4\n\n    return <div className={styles.classroom}>{classroomMap}</div>\n  }\n\n  /********** RENDER FUNCTIONS **********/\n\n  /**\n   * Article (left) component. Returns element to show on <article> tab.\n   */\n  article = () => {\n    if (this.state.globalState < 2) {\n      return <article className={styles.article}>{this.getCardsArray()}</article>\n    } else if (this.occupation.length !== 0) {\n      return <article className={styles.article}>{this.getComputersArray()}</article>\n    } else {\n      return <article className={styles.article}>{this.getCardsArray()}</article>\n    }\n  }\n\n  /**\n   * Aside (right) component. Returns element to show on <aside> tab.\n   */\n  aside = () => {\n    let divs = []\n    let i = 0\n    for (let c in this.classrooms) {\n      divs.push(this.getClassroomDiv(i, c))\n      i++\n    }\n    return <aside className={styles.aside}>{divs}</aside>\n  }\n\n  /********** REACT FUNCTIONS **********/\n\n  render() {\n    return (\n      <main>{this.article()}{this.aside()}</main>\n    );\n  }\n\n  componentDidMount() {\n    this.getReservations()\n    this.getClassrooms()\n    this.getOccupation()\n    console.log(this.state.globalState)\n    this.timer1 = setInterval(() => {\n      this.setState({globalState: (this.state.globalState + 1) % 6})\n      console.log(this.state.globalState)\n    }, 10000);\n    this.timer2 = setInterval(() => {\n      this.getReservations()\n      this.getClassrooms()\n    }, 10000);\n    this.timer3 = setInterval(() => {\n      this.getOccupation()\n    }, 60000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.timer1);\n    clearInterval(this.timer2);\n    clearInterval(this.timer3);\n  }\n}\n\nexport default Main;","import React from \"react\"\nimport styles from \"./footer.module.css\"\n\nclass Footer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cpdStatus : []\n    }\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  getValues = () => {\n    fetch(\"http://\" + this.config.Rpi2APIAddress + \":\" + this.config.Rpi2APIPort + \"/cpd-status\")\n      .then(response => response.json())\n      .then(json => this.setState({cpdStatus: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  componentDidMount() {\n    this.getValues()\n    this.timer = setInterval(() => {\n      this.getValues()\n    }, 60000);\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    let temp = \"La temperatura en el CPD es de \" + this.state.cpdStatus[\"temperature\"] + \" ºC\"\n    let hum = \"La humedad en el CPD está al \" + this.state.cpdStatus[\"humidity\"] + \" %\"\n    let sai = \"El estado de la batería del SAI es \" + this.state.cpdStatus[\"ups status (LDI rack)\"] + \".\"\n    let message = temp + \"   •   \" + hum + \"   •   \" + sai + \"   •   \"\n    return (\n      <div className={styles.marquee}>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n      </div>\n    );\n  }\n}\n\nexport default Footer;","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nimport Clock from \"../components/clock/clock.js\"\nimport Main from \"../components/main/main.js\"\nimport Footer from \"../components/footer/footer.js\"\n\nexport default () => (\n  <div className=\"wrapper\">\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>LDI</title>\n      <meta http-equiv=\"Content-Language\" content=\"es\" />\n    </Helmet>\n    <header className=\"header\">\n      <div className=\"headerTitle\">\n        {/* TODO: add logo */}\n        <h1>Laboratorio del Departamento de Informática</h1>\n      </div>\n      <div className=\"datetime\">\n        <Clock/>\n      </div>\n    </header>\n    <Main/>\n    <footer className=\"footer\">\n      <Footer/>\n    </footer>\n  </div>\n)\n"],"sourceRoot":""}