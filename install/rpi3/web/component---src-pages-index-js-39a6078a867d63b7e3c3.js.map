{"version":3,"sources":["webpack:///./src/components/clock/clock.js","webpack:///./src/components/cards/cards.js","webpack:///./src/components/classrooms/classrooms.js","webpack:///./src/components/information/information.js","webpack:///./src/pages/index.js"],"names":["Clock","props","_this","_React$Component","call","this","getCurrentDate","Date","toLocaleDateString","weekday","month","day","getCurrentTime","time","toLocaleTimeString","hour","minute","setState","date","state","componentDidMount","_this2","timer","setInterval","componentWillUnmount","clearInterval","render","react_default","a","createElement","className","styles","clock","React","Component","Cards","getReservations","fetch","config","Rpi3APIAddress","Rpi3APIPort","then","response","json","reservations","catch","error","console","log","updateCurrentTime","currentHour","getHours","currentMinutes","getMinutes","getCard","r","i","key","card","subject","study","classroom","professor","createCards","cards","_iterator","entries","_isArray","Array","isArray","_i","Symbol","iterator","_ref","length","next","done","value","_ref2","push","endCard","require","e","Error","code","_unused","Classrooms","getClassrooms","classrooms","createClassrooms","divs","c","free","occupied","reserved","Information","getValues","Rpi2APIAddress","Rpi2APIPort","cpdStatus","message","marquee","__webpack_exports__","Helmet","charSet","http-equiv","content","cards_cards","information"],"mappings":"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","file":"component---src-pages-index-js-39a6078a867d63b7e3c3.js","sourcesContent":["import React from \"react\"\nimport styles from \"./clock.module.css\"\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      time : this.getCurrentTime(),\n      date : this.getCurrentDate()\n    }\n  }\n  /**\n   * Gets current date\n   */\n  getCurrentDate = () => {\n    return new Date().toLocaleDateString(\"es-ES\", { weekday: 'short', month: 'short', day: 'numeric' });\n  }\n\n  /**\n   * Gets current time\n   */\n  getCurrentTime = () => {\n    let time = new Date().toLocaleTimeString(\"es-ES\", {hour: \"2-digit\", minute:\"2-digit\"});\n    if (time === \"0:00\") {\n      this.setState({date : this.getCurrentDate()})\n    }\n    return time;\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(() => {\n      this.setState({time : this.getCurrentTime()});\n    }, 10000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    return (\n      <div className={styles.clock}>\n        <div className={styles.date}>{this.state.date}</div>\n        <div className={styles.time}>{this.state.time}</div>\n      </div>\n    );\n  }\n}\n\nexport default Clock;","import React from \"react\"\nimport styles from \"./cards.module.css\"\n\n\nclass Cards extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reservations: []\n    }\n    this.currentHour = 0\n    this.currentMinutes = 0\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON including today reservations\n   */\n  getReservations = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/reservations\")\n      .then(response => response.json())\n      .then(json => this.setState({reservations: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  /**\n   * Updates the current time, used to display only future reservations\n   */\n  updateCurrentTime = () => {\n    let date = new Date();\n    this.currentHour = date.getHours();\n    this.currentMinutes = date.getMinutes();\n  }\n\n  /**\n   * Returns the html <div> object of a reservation\n   * @param {reservation dict}  r dictionary with all info of a reservation\n   * @param {int}               i index to set as react key of the div\n   */\n  getCard = (r, i) => {\n    if (this.currentHour < r[\"EndHour\"] || (this.currentHour === r[\"EndHour\"] && this.currentMinutes < r[\"EndMinute\"])) {\n      return <div key={i} className={styles.card}>\n        <div className={styles.subject}>{r[\"Subject\"]}</div>\n        <div className={styles.study}>{r[\"Study\"]}</div>\n        <div className={styles.classroom}>{r[\"Classroom\"]} de {r[\"StartHour\"] + \":\" + \n          (r[\"StartMinute\"] === 0 ? \"00\" : r[\"StartMinute\"])} a {r[\"EndHour\"] + \":\" + \n          (r[\"EndMinute\"] === 0 ? \"00\" : r[\"EndMinute\"])}</div>\n        <div className={styles.professor}>{r[\"Professor\"]}</div>\n      </div>;\n    }\n    return null\n  }\n\n  /**\n   * Returns an array of html <div>, where every <div> is a reservation card\n   */\n  createCards = () => {\n    this.updateCurrentTime()\n    let cards = []\n    for (const [i, r] of this.state.reservations.entries()) {\n      let card = this.getCard(r, i)\n      if (card != null) {\n        cards.push(card)\n      }\n      if (cards.length === 4) {\n        break;\n      }\n    }\n    if (cards.length !== 0) {\n      return cards\n    }\n    return <div className={styles.endCard}>No hay reservas para el día de hoy o ya han finalizado todas las reservas</div>\n  }\n\n  render() {\n    return ( // TODO: maybe <tag>{function()}</tag>\n      this.createCards()\n    );\n  }\n\n  componentDidMount() {\n    this.getReservations()\n    this.timer = setInterval(() => {\n      this.getReservations()\n    }, 60000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n}\n\nexport default Cards;","import React from \"react\"\nimport styles from \"./classrooms.module.css\"\n\n\nclass Classrooms extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      classrooms: []\n    }\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON classrooms status\n   */\n  getClassrooms = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/classrooms\")\n      .then(response => response.json())\n      .then(json => this.setState({classrooms: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n\n  /**\n   * Returns an array of html <div>, where every <div> is a classroom\n   */\n  createClassrooms = () => {\n    let divs = []\n    let key = 0\n    for (let c in this.state.classrooms) {\n      if (this.state.classrooms[c] === 0 ) {\n        divs.push(<div key={key} className={styles.free}>{c}</div>)\n      } else if (this.state.classrooms[c] === 1 ) {\n        divs.push(<div key={key} className={styles.occupied}>{c}</div>)\n      } else {\n        divs.push(<div key={key} className={styles.reserved}>{c}</div>)\n      }\n      key++\n    }\n    return divs\n  }\n\n  render() {\n    return ( // TODO: maybe <tag>{function()}</tag>\n      this.createClassrooms()\n    );\n  }\n\n  componentDidMount() {\n    this.getClassrooms()\n    this.timer = setInterval(() => {\n      this.getClassrooms()\n    }, 60000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n}\n\nexport default Classrooms;","import React from \"react\"\nimport styles from \"./information.module.css\"\n\nclass Information extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cpdStatus : []\n    }\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  getValues = () => {\n    fetch(\"http://\" + this.config.Rpi2APIAddress + \":\" + this.config.Rpi2APIPort + \"/cpd-status\")\n      .then(response => response.json())\n      .then(json => this.setState({cpdStatus: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  componentDidMount() {\n    this.getValues()\n    this.timer = setInterval(() => {\n      this.getValues()\n    }, 60000);\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    let temp = \"La temperatura en el CPD es de \" + this.state.cpdStatus[\"temperature\"] + \" ºC\"\n    let hum = \"La humedad en el CPD está al \" + this.state.cpdStatus[\"humidity\"] + \" %\"\n    let sai = \"El estado de la batería del SAI es \" + this.state.cpdStatus[\"ups status (LDI rack)\"] + \".\"\n    let message = temp + \"   •   \" + hum + \"   •   \" + sai + \"      •      \"\n    return (\n      <div className={styles.marquee}>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n      </div>\n    );\n  }\n}\n\nexport default Information;","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nimport Clock from \"../components/clock/clock.js\"\nimport Cards from \"../components/cards/cards.js\"\nimport Classrooms from \"../components/classrooms/classrooms.js\"\nimport Information from \"../components/information/information.js\"\n\nexport default () => (\n  <div className=\"wrapper\">\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>LDI</title>\n      <meta http-equiv=\"Content-Language\" content=\"es\" />\n    </Helmet>\n    <header className=\"header\">\n      <div className=\"headerTitle\">\n        {/* TODO: add logo */}\n        <h1>Laboratorio del Departamento de Informática</h1>\n      </div>\n      <div className=\"datetime\">\n        <Clock/>\n      </div>\n    </header>\n    <main className=\"main\">\n      <Cards/>\n    </main>\n    <aside className=\"aside\">\n      <Classrooms/>\n    </aside>\n    <footer className=\"footer\">\n      <Information />\n    </footer>\n  </div>\n)\n"],"sourceRoot":""}