(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{145:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(151),o=a(7),i=a.n(o),c=a(141),l=a.n(c),u=function(e){function t(t){var a;return(a=e.call(this,t)||this).getCurrentDate=function(){return(new Date).toLocaleDateString("es-ES",{weekday:"short",month:"short",day:"numeric"})},a.getCurrentTime=function(){var e=(new Date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return"0:00"===e&&a.setState({date:a.getCurrentDate()}),e},a.state={time:a.getCurrentTime(),date:a.getCurrentDate()},a}i()(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;this.timer=setInterval(function(){e.setState({time:e.getCurrentTime()})},1e4)},a.componentWillUnmount=function(){clearInterval(this.timer)},a.render=function(){return n.a.createElement("div",{className:l.a.clock},n.a.createElement("div",{className:l.a.date},this.state.date),n.a.createElement("div",{className:l.a.time},this.state.time))},t}(n.a.Component),m=(a(159),a(160),a(81),a(56),a(165),a(78),a(79),a(142)),d=a.n(m),f=(a(4),function(e){function t(t){var r;(r=e.call(this,t)||this).getReservations=function(){fetch("http://"+r.config.Rpi3APIAddress+":"+r.config.Rpi3APIPort+"/reservations").then(function(e){return e.json()}).then(function(e){return r.reservations=e}).catch(function(e){return console.log("Request HTTP GET /reservations failed",e)})},r.getClassrooms=function(){fetch("http://"+r.config.Rpi3APIAddress+":"+r.config.Rpi3APIPort+"/classrooms").then(function(e){return e.json()}).then(function(e){return r.classrooms=e}).catch(function(e){return console.log("Request HTTP GET /classrooms failed",e)})},r.getOccupation=function(){fetch("http://"+r.config.Rpi3APIAddress+":"+r.config.Rpi3APIPort+"/occupation").then(function(e){return e.json()}).then(function(e){return r.occupation=e}).catch(function(e){return console.log("Request HTTP GET /occupation failed",e)})},r.updateCurrentTime=function(){var e=new Date;r.currentHour=e.getHours(),r.currentMinutes=e.getMinutes()},r.getCardDiv=function(e,t){return 1===r.state.globalState&&t<=r.lastShow&&r.reservationsNum>4?null:r.currentHour<e.EndHour||r.currentHour===e.EndHour&&r.currentMinutes<e.EndMinute?n.a.createElement("div",{key:256+t,className:d.a.card},n.a.createElement("div",{className:d.a.subject},e.Subject),n.a.createElement("div",{className:d.a.study},e.Study),n.a.createElement("div",{className:d.a.classroom},e.Classroom," de ",e.StartHour+":"+(0===e.StartMinute?"00":e.StartMinute)," a ",e.EndHour+":"+(0===e.EndMinute?"00":e.EndMinute))):null},r.getComputerDiv=function(e,t,a){var r=t;switch(a){case"F16":r+=101;break;case"F18":r+=201;break;case"C05":r+=51;break;case"C06":r+=151}switch(e){case 0:return n.a.createElement("div",{key:r,className:d.a.shutdown},a.includes("F")?"F"+r.toString():"C"+r.toString());case 1:return n.a.createElement("div",{key:r,className:d.a.linux},a.includes("F")?"F"+r.toString():"C"+r.toString());case 2:return n.a.createElement("div",{key:r,className:d.a.windows},a.includes("F")?"F"+r.toString():"C"+r.toString());case 3:return n.a.createElement("div",{key:r,className:d.a.linuxUser},a.includes("F")?"F"+r.toString():"C"+r.toString());case 4:return n.a.createElement("div",{key:r,className:d.a.windowsUser},a.includes("F")?"F"+r.toString():"C"+r.toString());case 5:return n.a.createElement("div",{key:r,className:d.a.timeout},a.includes("F")?"F"+r.toString():"C"+r.toString());default:return n.a.createElement("div",{key:r})}},r.getClassroomDiv=function(e,t){var a=!1;switch(r.state.globalState-2===e&&r.state.globalState>1&&(a=!0),r.classrooms[t]){case 0:return n.a.createElement("div",{key:e,className:a?[d.a.free,d.a.arrow].join(" "):d.a.free},t);case 1:return n.a.createElement("div",{key:e,className:a?[d.a.occupied,d.a.arrow].join(" "):d.a.occupied},t);case 2:return n.a.createElement("div",{key:e,className:a?[d.a.reserved,d.a.arrow].join(" "):d.a.reserved},t);default:return n.a.createElement("div",{key:e,className:a?[d.a.futureOccupied,d.a.arrow].join(" "):d.a.futureOccupied},t)}},r.getCardsArray=function(){r.updateCurrentTime();var e=[],t=r.reservations.entries(),a=Array.isArray(t),s=0;for(t=a?t:t[Symbol.iterator]();;){var o;if(a){if(s>=t.length)break;o=t[s++]}else{if((s=t.next()).done)break;o=s.value}var i=o,c=i[0],l=i[1],u=r.getCardDiv(l,c);if(null!=u&&e.push(u),4===e.length){r.lastShow=c;break}}return 0!==e.length?(r.reservationsNum=r.reservations.length,e):n.a.createElement("div",{className:d.a.endCard},"No hay reservas para el día de hoy o ya han finalizado todas las reservas")},r.getComputersArray=function(){var e=["F16","F18","C05","C06"],t=[],a=r.occupation[e[r.classroomToShow]].Computers.entries(),s=Array.isArray(a),o=0;for(a=s?a:a[Symbol.iterator]();;){var i;if(s){if(o>=a.length)break;i=a[o++]}else{if((o=a.next()).done)break;i=o.value}var c=i,l=c[0],u=c[1];t.push(r.getComputerDiv(u,l,e[r.classroomToShow]))}return r.classroomToShow=(r.classroomToShow+1)%4,n.a.createElement("div",{className:d.a.classroom},t)},r.article=function(){return r.state.globalState<2?n.a.createElement("article",{className:d.a.article},r.getCardsArray()):0!==r.occupation.length?n.a.createElement("article",{className:d.a.article},r.getComputersArray()):n.a.createElement("article",{className:d.a.article},r.getCardsArray())},r.aside=function(){var e=[],t=0;for(var a in r.classrooms)e.push(r.getClassroomDiv(t,a)),t++;return n.a.createElement("aside",{className:d.a.aside},e)},r.state={globalState:-1},r.reservations=[],r.occupation=[],r.classrooms=[],r.reservationsNum=0,r.currentHour=0,r.currentMinutes=0,r.classroomToShow=0,r.lastShow=0;try{r.config=a(!function(){var e=new Error("Cannot find module '/etc/rpi3_conf.json'");throw e.code="MODULE_NOT_FOUND",e}())}catch(s){r.config=a(150)}return r}i()(t,e);var r=t.prototype;return r.render=function(){return n.a.createElement("main",null,this.article(),this.aside())},r.componentDidMount=function(){var e=this;this.getReservations(),this.getClassrooms(),this.getOccupation(),console.log(this.state.globalState),this.timer1=setInterval(function(){e.setState({globalState:(e.state.globalState+1)%6}),console.log(e.state.globalState)},1e4),this.timer2=setInterval(function(){e.getReservations(),e.getClassrooms()},1e4),this.timer3=setInterval(function(){e.getOccupation()},6e4)},r.componentWillUnmount=function(){clearInterval(this.timer1),clearInterval(this.timer2),clearInterval(this.timer3)},t}(n.a.Component)),h=a(143),g=a.n(h),p=function(e){function t(t){var r;(r=e.call(this,t)||this).getValues=function(){fetch("http://"+r.config.Rpi2APIAddress+":"+r.config.Rpi2APIPort+"/cpd-status").then(function(e){return e.json()}).then(function(e){return r.setState({cpdStatus:e})}).catch(function(e){return console.log("Request failed",e)})},r.state={cpdStatus:[]};try{r.config=a(!function(){var e=new Error("Cannot find module '/etc/rpi3_conf.json'");throw e.code="MODULE_NOT_FOUND",e}())}catch(n){r.config=a(150)}return r}i()(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;this.getValues(),this.timer=setInterval(function(){e.getValues()},6e4)},r.componentWillUnmount=function(){clearInterval(this.timer)},r.render=function(){var e="La temperatura en el CPD es de "+this.state.cpdStatus.temperature+" ºC"+"   •   "+("La humedad en el CPD está al "+this.state.cpdStatus.humidity+" %")+"   •   "+("El estado de la batería del SAI es "+this.state.cpdStatus["ups status (LDI rack)"]+".")+"   •   ";return n.a.createElement("div",{className:g.a.marquee},n.a.createElement("pre",null,e),n.a.createElement("pre",null,e),n.a.createElement("pre",null,e))},t}(n.a.Component);t.default=function(){return n.a.createElement("div",{className:"wrapper"},n.a.createElement(s.Helmet,null,n.a.createElement("meta",{charSet:"utf-8"}),n.a.createElement("title",null,"LDI"),n.a.createElement("meta",{"http-equiv":"Content-Language",content:"es"})),n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"headerTitle"},n.a.createElement("h1",null,"Laboratorio del Departamento de Informática")),n.a.createElement("div",{className:"datetime"},n.a.createElement(u,null))),n.a.createElement(f,null),n.a.createElement("footer",{className:"footer"},n.a.createElement(p,null)))}},150:function(e){e.exports={Rpi2APIAddress:"163.117.170.102",Rpi2APIPort:3e3,Rpi3APIAddress:"163.117.170.103",Rpi3APIPort:3e3,Rpi2APIAuthorizedToken:"Bearer top_secret_string",HueBridgeAddress:"192.168.1.123",HueBridgeToken:"top_secret_string",AlarmSoundPath:"/path/to/file/mp3"}}}]);
//# sourceMappingURL=component---src-pages-index-js-23a23022bc6cb9014129.js.map