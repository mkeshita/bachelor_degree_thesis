{"version":3,"sources":["webpack:///./src/components/clock/clock.js","webpack:///./src/components/main/main.js","webpack:///./src/components/aside/aside.js","webpack:///./src/components/footer/footer.js","webpack:///./src/pages/index.js"],"names":["Clock","props","_this","_React$Component","call","this","getCurrentDate","Date","toLocaleDateString","weekday","month","day","getCurrentTime","time","toLocaleTimeString","hour","minute","setState","date","state","componentDidMount","_this2","timer","setInterval","componentWillUnmount","clearInterval","render","react_default","a","createElement","className","styles","clock","React","Component","Main","getReservations","fetch","config","Rpi3APIAddress","Rpi3APIPort","then","response","json","reservations","catch","error","console","log","updateCurrentTime","currentHour","getHours","currentMinutes","getMinutes","getCard","r","i","rotated","reservationsNum","key","card","subject","study","classroom","createCards","cards","_iterator","entries","_isArray","Array","isArray","_i","Symbol","iterator","_ref","length","next","done","value","_ref2","push","globalState","endCard","getOccupation","classrooms","Computers","occupation","getComputer","name","ip","includes","shutdown","toString","linux","windows","linuxUser","windowsUser","timeout","printClassrooms","computers","classroomMap","title","classroomToShow","_iterator2","_isArray2","_i2","_ref3","_ref4","magic","require","e","Error","code","_unused","timer1","timer2","Aside","getClassrooms","createClassrooms","divs","c","free","occupied","reserved","futureOccupied","Footer","getValues","Rpi2APIAddress","Rpi2APIPort","cpdStatus","message","marquee","__webpack_exports__","Helmet","charSet","http-equiv","content","main","aside","footer"],"mappings":"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","file":"component---src-pages-index-js-995b406d134708f5d5a3.js","sourcesContent":["import React from \"react\"\nimport styles from \"./clock.module.css\"\n\nclass Clock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      time : this.getCurrentTime(),\n      date : this.getCurrentDate()\n    }\n  }\n  /**\n   * Gets current date\n   */\n  getCurrentDate = () => {\n    return new Date().toLocaleDateString(\"es-ES\", { weekday: 'short', month: 'short', day: 'numeric' });\n  }\n\n  /**\n   * Gets current time\n   */\n  getCurrentTime = () => {\n    let time = new Date().toLocaleTimeString(\"es-ES\", {hour: \"2-digit\", minute:\"2-digit\"});\n    if (time === \"0:00\") {\n      this.setState({date : this.getCurrentDate()})\n    }\n    return time;\n  }\n\n  componentDidMount() {\n    this.timer = setInterval(() => {\n      this.setState({time : this.getCurrentTime()});\n    }, 10000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    return (\n      <div className={styles.clock}>\n        <div className={styles.date}>{this.state.date}</div>\n        <div className={styles.time}>{this.state.time}</div>\n      </div>\n    );\n  }\n}\n\nexport default Clock;","import React from \"react\"\nimport styles from \"./main.module.css\"\n\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      reservations: [],\n      occupation : []\n    }\n    this.rotated = false\n    this.reservationsNum = 0\n    this.currentHour = 0\n    this.currentMinutes = 0\n    this.globalState = 0\n    this.classroomToShow = 0\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON including today reservations\n   */\n  getReservations = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/reservations\")\n      .then(response => response.json())\n      .then(json => this.setState({reservations: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  /**\n   * Updates the current time, used to display only future reservations\n   */\n  updateCurrentTime = () => {\n    let date = new Date();\n    this.currentHour = date.getHours();\n    this.currentMinutes = date.getMinutes();\n  }\n\n  /**\n   * Returns the html <div> object of a reservation\n   * @param {reservation dict}  r dictionary with all info of a reservation\n   * @param {int}               i index to set as react key of the div\n   */\n  getCard = (r, i) => {\n    if (this.rotated && i < 4 && this.reservationsNum > 4) {\n      // if rotating, show next reservations (i >= 4)\n      return null\n    }\n    if (this.currentHour < r[\"EndHour\"] || (this.currentHour === r[\"EndHour\"] && this.currentMinutes < r[\"EndMinute\"])) {\n      return <div key={i} className={styles.card}>\n        <div className={styles.subject}>{r[\"Subject\"]}</div>\n        <div className={styles.study}>{r[\"Study\"]}</div>\n        <div className={styles.classroom}>{r[\"Classroom\"]} de {r[\"StartHour\"] + \":\" + \n          (r[\"StartMinute\"] === 0 ? \"00\" : r[\"StartMinute\"])} a {r[\"EndHour\"] + \":\" + \n          (r[\"EndMinute\"] === 0 ? \"00\" : r[\"EndMinute\"])}</div>\n      </div>;\n    }\n    return null\n  }\n\n  /**\n   * Returns an array of html <div>, where every <div> is a reservation card\n   */\n  createCards = () => {\n    this.updateCurrentTime()\n    let cards = [];\n    // Get reservations to show\n    for (const [i, r] of this.state.reservations.entries()) {\n      let card = this.getCard(r, i)\n      if (card != null) {\n        cards.push(card)\n      }\n      if (cards.length === 4) {\n        break;\n      }\n    }\n    // Change between rotation states and update global state\n    (this.rotated) ? this.rotated = false : this.rotated = true\n    this.globalState = (this.globalState + 1) % 6\n    // Return cards if any\n    if (cards.length !== 0) {\n      this.reservationsNum = this.state.reservations.length\n      return cards\n    }\n    return <div className={styles.endCard}>No hay reservas para el día de hoy o ya han finalizado todas las reservas</div>\n  }\n\n  getOccupation = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/occupation\")\n      .then(response => response.json())\n      .then(json => {\n        var classrooms = [\"caca\"]\n        console.log(classrooms)\n        classrooms[0] = json[\"F16\"].Computers\n        classrooms[1] = json[\"F18\"].Computers\n        classrooms[2] = json[\"C05\"].Computers\n        classrooms[3] = json[\"C06\"].Computers\n        console.log(classrooms)\n        this.setState({occupation: classrooms})\n      })\n      .catch(error => console.log('Request failed', error))\n  }\n\n  getComputer = (r, i, name) => {\n    let ip = i + 1\n    if (name.includes(\"C\")) {\n      ip += 50\n    }\n    switch (r) {\n      case 0:\n        return <div key={i} className={styles.shutdown}>{(ip < 10)? name + \"0\"+ ip.toString() : name + ip.toString()}</div>\n      case 1:\n        return <div key={i} className={styles.linux}>{(ip < 10)? name + \"0\"+ ip.toString() : name + ip.toString()}</div>\n      case 2:\n        return <div key={i} className={styles.windows}>{(ip < 10)? name + \"0\"+ ip.toString() : name + ip.toString()}</div>\n      case 3:\n        return <div key={i} className={styles.linuxUser}>{(ip < 10)? name + \"0\"+ ip.toString() : name + ip.toString()}</div>\n      case 4:\n        return <div key={i} className={styles.windowsUser}>{(ip < 10)? name + \"0\"+ ip.toString() : name + ip.toString()}</div>\n      case 5:\n        return <div key={i} className={styles.timeout}>{(ip < 10)? name + \"0\"+ ip.toString() : name + ip.toString()}</div>\n      default:\n        return <div key={i}></div>\n    }\n  }\n\n  printClassrooms = () => {\n    let computers = [\"F1\", \"F2\", \"C\", \"C1\"]\n    let classroom = [\"4.0.F16\", \"4.0.F18\", \"2.2.C05\", \"2.2.C06\"]\n    let classroomMap = [<h2 className={styles.title}>Aula {classroom[this.classroomToShow]}</h2>]\n    // Get computer status of the classroom\n    console.log(this.classroomToShow)\n    console.log(this.state.occupation)\n    console.log(this.state.occupation[this.classroomToShow])\n    for (const [i, r] of this.state.occupation[this.classroomToShow].entries()) {\n      classroomMap.push(this.getComputer(r, i, computers[this.classroomToShow]))\n    }\n    // Change between classrooms and update global state\n    this.classroomToShow = (this.classroomToShow + 1) % 4\n    this.globalState = (this.globalState + 1) % 6\n\n    return classroomMap\n  }\n\n  magic = () => {\n    if (this.globalState < 2) {\n      return this.createCards()\n    } else {\n      if (this.state.occupation.length !== 0) {\n        return this.printClassrooms()\n      }\n      else {\n        this.globalState = 0\n        return this.createCards()\n      }\n    }\n  }\n\n  render() {\n    return ( // TODO: maybe <tag>{function()}</tag>\n      this.magic()\n    );\n  }\n\n  componentDidMount() {\n    this.getReservations()\n    this.getOccupation()\n    this.timer1 = setInterval(() => {\n      this.getReservations()\n    }, 10000);\n    this.timer2 = setInterval(() => {\n      this.getOccupation()\n    }, 300000)\n  }\n  componentWillUnmount() {\n    clearInterval(this.timer1);\n    clearInterval(this.timer2);\n  }\n}\n\nexport default Main;","import React from \"react\"\nimport styles from \"./aside.module.css\"\n\n\nclass Aside extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      classrooms: []\n    }\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  /**\n   * Makes HTTP GET request to rpi3 API to get JSON classrooms status\n   */\n  getClassrooms = () => {\n    fetch(\"http://\" + this.config.Rpi3APIAddress + \":\" + this.config.Rpi3APIPort + \"/classrooms\")\n      .then(response => response.json())\n      .then(json => this.setState({classrooms: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n\n  /**\n   * Returns an array of html <div>, where every <div> is a classroom\n   */\n  createClassrooms = () => {\n    let divs = []\n    let key = 0\n    for (let c in this.state.classrooms) {\n      if (this.state.classrooms[c] === 0 ) {\n        divs.push(<div key={key} className={styles.free}>{c}</div>)\n      } else if (this.state.classrooms[c] === 1 ) {\n        divs.push(<div key={key} className={styles.occupied}>{c}</div>)\n      } else if (this.state.classrooms[c] === 2 ) {\n        divs.push(<div key={key} className={styles.reserved}>{c}</div>)\n      } else {\n        divs.push(<div key={key} className={styles.futureOccupied}>{c}</div>)\n      }\n      key++\n    }\n    return divs\n  }\n\n  render() {\n    return ( // TODO: maybe <tag>{function()}</tag>\n      this.createClassrooms()\n    );\n  }\n\n  componentDidMount() {\n    this.getClassrooms()\n    this.timer = setInterval(() => {\n      this.getClassrooms()\n    }, 60000);\n  }\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n}\n\nexport default Aside;","import React from \"react\"\nimport styles from \"./footer.module.css\"\n\nclass Footer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cpdStatus : []\n    }\n    try { // Load config\n      this.config = require(\"/etc/rpi3_conf.json\")\n    } catch {\n      this.config = require(\"../../../../../config.json\")\n    }\n  }\n\n  getValues = () => {\n    fetch(\"http://\" + this.config.Rpi2APIAddress + \":\" + this.config.Rpi2APIPort + \"/cpd-status\")\n      .then(response => response.json())\n      .then(json => this.setState({cpdStatus: json}))\n      .catch(error => console.log('Request failed', error))\n  }\n\n  componentDidMount() {\n    this.getValues()\n    this.timer = setInterval(() => {\n      this.getValues()\n    }, 60000);\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n  \n  render() {\n    let temp = \"La temperatura en el CPD es de \" + this.state.cpdStatus[\"temperature\"] + \" ºC\"\n    let hum = \"La humedad en el CPD está al \" + this.state.cpdStatus[\"humidity\"] + \" %\"\n    let sai = \"El estado de la batería del SAI es \" + this.state.cpdStatus[\"ups status (LDI rack)\"] + \".\"\n    let message = temp + \"   •   \" + hum + \"   •   \" + sai + \"   •   \"\n    return (\n      <div className={styles.marquee}>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n        <pre>{message}</pre>\n      </div>\n    );\n  }\n}\n\nexport default Footer;","import React from \"react\"\nimport { Helmet } from \"react-helmet\"\n\nimport Clock from \"../components/clock/clock.js\"\nimport Main from \"../components/main/main.js\"\nimport Aside from \"../components/aside/aside.js\"\nimport Footer from \"../components/footer/footer.js\"\n\nexport default () => (\n  <div className=\"wrapper\">\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>LDI</title>\n      <meta http-equiv=\"Content-Language\" content=\"es\" />\n    </Helmet>\n    <header className=\"header\">\n      <div className=\"headerTitle\">\n        {/* TODO: add logo */}\n        <h1>Laboratorio del Departamento de Informática</h1>\n      </div>\n      <div className=\"datetime\">\n        <Clock/>\n      </div>\n    </header>\n    <main className=\"main\">\n      <Main/>\n    </main>\n    <aside className=\"aside\">\n      <Aside/>\n    </aside>\n    <footer className=\"footer\">\n      <Footer/>\n    </footer>\n  </div>\n)\n"],"sourceRoot":""}